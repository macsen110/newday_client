{"version":3,"sources":["webpack:///./script/build/actions/index.ts","webpack:///./script/build/components/logout.tsx","webpack:///./script/build/utils/xhr.ts"],"names":["__webpack_require__","d","__webpack_exports__","LOGIN","LOGOUT","LISTGOODS","SHOWGOOD","POSTCOMMET","DELETECOMMET","LISTCOMMETS","r","react__WEBPACK_IMPORTED_MODULE_0__","_utils_xhr__WEBPACK_IMPORTED_MODULE_1__","_actions__WEBPACK_IMPORTED_MODULE_2__","_context__WEBPACK_IMPORTED_MODULE_3__","useEffect","useContext","props","_a","dispatch","state","url","done","callData","code","type","history","replace","pathname","withCredentials","faild","Error","xhr","opt","this","method","aysc","sendData","cache","Object","assign","send","prototype","_this","_xhr","XMLHttpRequest","timeout","open","setHeader","setRequestHeader","onload","readyState","status","sucData","response","JSON","parse","error","onerror"],"mappings":"wFAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAAJ,EAAAC,EAAAC,EAAA,sBAAAG,IAAAL,EAAAC,EAAAC,EAAA,sBAAAI,IAAAN,EAAAC,EAAAC,EAAA,sBAAAK,IAAAP,EAAAC,EAAAC,EAAA,sBAAAM,IAAAR,EAAAC,EAAAC,EAAA,sBAAAO,IAAO,IAAMN,EAAQ,QACRC,EAAS,SACTC,EAAY,YACZC,EAAW,WACXC,EAAa,aACbC,EAAe,eACfC,EAAc,+CCN3BT,EAAAU,EAAAR,GAAA,IAAAS,EAAAX,EAAA,GAAAY,EAAAZ,EAAA,GAAAa,EAAAb,EAAA,GAAAc,EAAAd,EAAA,GAKIe,EAAAJ,EAAA,UACAK,EAAAL,EAAA,WAyBWT,EAAA,QAtBf,SAAgBe,GACN,IAAAC,EAAAF,EAAAF,EAAA,GAAQK,GAAPD,EAAAE,MAAOF,EAAAC,UAkBd,OAjBAJ,EAAU,WACN,IAAIH,EAAA,EAAI,CACJS,IAAK,oBACLC,KAAM,SAAUC,GACS,GAAjBA,EAASC,OACTL,EAAS,CAACM,KAAMZ,EAAA,IAChBI,EAAMS,QAAQC,QAAQ,CAAEC,SAAU,QAG1CC,iBAAiB,EACjBC,MAAO,WACS,IAAIC,MAAM,uBAI/B,IAEKpB,EAAA,cAAAA,EAAA,gDC5BZ,IAAAqB,EAAA,WAUC,SAAAA,EAAYC,GACXC,KAAKC,OAAS,MACdD,KAAKE,MAAO,EACZF,KAAKG,SAAW,KAChBH,KAAKI,OAAQ,EACM,iBAARL,GACVM,OAAOC,OAAON,KAAMD,GAGrBC,KAAKb,IAAM,4BAAca,KAAKb,IAC9Ba,KAAKO,OAsCP,OAnCCT,EAAAU,UAAAD,KAAA,eAAAE,EAAAT,KACKU,EAAO,IAAIC,eACfD,EAAKE,QAAU,IACfZ,KAAKL,kBAAoBe,EAAKf,iBAAkB,GAChDe,EAAKf,iBAAkB,EACvBe,EAAKG,KAAKb,KAAKC,OAAQD,KAAKb,IAAKa,KAAKE,MAElCF,KAAKc,WACRJ,EAAKK,iBAAiB,eAAgBf,KAAKc,WAEvCd,KAAKI,QACTM,EAAKK,iBAAiB,SAAU,YAChCL,EAAKK,iBAAiB,gBAAiB,aAGxCL,EAAKM,OAAS,WACb,GAAwB,IAApBN,EAAKO,WACR,GAAoB,MAAhBP,EAAKQ,OAAgB,CACxB,IAAIC,EACAT,EAAKU,WACRD,EAAUE,KAAKC,MAAMZ,EAAKU,WAE3BX,EAAKrB,KAAK+B,OAEN,CACJ,IAAII,EAAQ,IAAI1B,MAAM,wBACtBY,EAAKb,MAAM2B,KAIdb,EAAKc,QAAU,SAACD,GACfd,EAAKb,MAAM2B,IAEZb,EAAKH,KAAKP,KAAKG,WAEjBL,EA1DA,GA4De9B,EAAA","file":"static/js/5.7de4f65ee150ded46bc8.js","sourcesContent":["export const LOGIN = 'LOGIN'\nexport const LOGOUT = 'LOGOUT'\nexport const LISTGOODS = 'LISTGOODS';\nexport const SHOWGOOD = 'SHOWGOOD';\nexport const POSTCOMMET = 'POSTCOMMET';\nexport const DELETECOMMET = 'DELETECOMMET';\nexport const LISTCOMMETS = 'LISTCOMMETS';\nexport const DONELOADING = 'DONELOADING';","import * as React from 'react';\nimport xhr from '../utils/xhr';\nimport { LOGOUT } from '../actions';\nimport {FetchesContext} from '../context'\nconst {\n    useEffect,\n    useContext\n} = React\n//register views\nfunction Logout(props: any) {\n    const {state, dispatch} = useContext(FetchesContext)\n    useEffect(() => {\n        new xhr({\n            url: '/api/users/logout',\n            done: function (callData) {\n                if (callData.code == 0) {\n                    dispatch({type: LOGOUT})\n                    props.history.replace({ pathname: '/' })\n                }\n            },\n            withCredentials: true,\n            faild: function () {\n                var error = new Error('something wrong')\n\n            }\n        })\n    }, [])\n\n    return (<></>)\n}\n\nexport default Logout;","class xhr {\n\tmethod: string;\n\taysc: boolean;\n\tsendData: any;\n\tcache: boolean;\n\turl: string;\n\tsetHeader: any;\n\tfaild: Function;\n\twithCredentials: true;\n\tdone: Function;\n\tconstructor(opt: any) {\n\t\tthis.method = 'GET';\n\t\tthis.aysc = true;\n\t\tthis.sendData = null;\n\t\tthis.cache = true;\n\t\tif (typeof opt === 'object') {\n\t\t\tObject.assign(this, opt);\n\t\t}\n\t\t//@ts-ignore\n\t\tthis.url = perfixerURL + this.url\n\t\tthis.send();\n\n\t}\n\tsend() {\n\t\tvar _xhr = new XMLHttpRequest();\n\t\t_xhr.timeout = 60000;\n\t\tthis.withCredentials && (_xhr.withCredentials = true);\n\t\t_xhr.withCredentials = true\n\t\t_xhr.open(this.method, this.url, this.aysc);\n\n\t\tif (this.setHeader) {\n\t\t\t_xhr.setRequestHeader(\"Content-Type\", this.setHeader);\n\t\t}\n\t\tif (!this.cache) {\n\t\t\t_xhr.setRequestHeader(\"Pragma\", \"no-cache\");\n\t\t\t_xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n\t\t}\n\n\t\t_xhr.onload = () => {\n\t\t\tif (_xhr.readyState === 4) {\n\t\t\t\tif (_xhr.status === 200) {\n\t\t\t\t\tvar sucData;\n\t\t\t\t\tif (_xhr.response) {\n\t\t\t\t\t\tsucData = JSON.parse(_xhr.response);\n\t\t\t\t\t}\n\t\t\t\t\tthis.done(sucData);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar error = new Error(\"something went wrong\");\n\t\t\t\t\tthis.faild(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t_xhr.onerror = (error) => {\n\t\t\tthis.faild(error);\n\t\t}\n\t\t_xhr.send(this.sendData)\n\t}\n}\n\nexport default xhr;"],"sourceRoot":""}