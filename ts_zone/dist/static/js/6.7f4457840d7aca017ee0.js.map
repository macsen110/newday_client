{"version":3,"sources":["webpack:///./script/build/components/logout.tsx","webpack:///./script/build/actions/index.ts","webpack:///./script/build/utils/xhr.ts"],"names":["React","__webpack_require__","xhr_1","actions_1","context_1","useEffect","useContext","exports","default","props","_a","FetchesContext","dispatch","state","url","done","callData","code","type","LOGOUT","history","replace","pathname","withCredentials","faild","Error","createElement","Fragment","LOGIN","LISTGOODS","SHOWGOOD","POSTCOMMET","DELETECOMMET","LISTCOMMETS","DONELOADING","xhr","opt","this","method","aysc","sendData","cache","Object","assign","send","prototype","_this","_xhr","XMLHttpRequest","timeout","open","setHeader","setRequestHeader","onload","readyState","status","sucData","response","JSON","parse","error","onerror"],"mappings":"0IAAA,IAAAA,EAAAC,EAAA,GACAC,EAAAD,EAAA,GACAE,EAAAF,EAAA,GACAG,EAAAH,EAAA,IAEII,EAAAL,EAAAK,UACAC,EAAAN,EAAAM,WAyBJC,EAAAC,QAtBA,SAAgBC,GACN,IAAAC,EAAAJ,EAAAF,EAAAO,gBAAQC,GAAPF,EAAAG,MAAOH,EAAAE,UAkBd,OAjBAP,EAAU,WACN,IAAIH,EAAAM,QAAI,CACJM,IAAK,oBACLC,KAAM,SAAUC,GACS,GAAjBA,EAASC,OACTL,EAAS,CAACM,KAAMf,EAAAgB,SAChBV,EAAMW,QAAQC,QAAQ,CAAEC,SAAU,QAG1CC,iBAAiB,EACjBC,MAAO,WACS,IAAIC,MAAM,uBAI/B,IAEKzB,EAAA0B,cAAA1B,EAAA2B,SAAA,wFC5BCpB,EAAAqB,MAAQ,QACRrB,EAAAY,OAAS,SACTZ,EAAAsB,UAAY,YACZtB,EAAAuB,SAAW,WACXvB,EAAAwB,WAAa,aACbxB,EAAAyB,aAAe,eACfzB,EAAA0B,YAAc,cACd1B,EAAA2B,YAAc,+FCP3B,IAAAC,EAAA,WAUC,SAAAA,EAAYC,GACXC,KAAKC,OAAS,MACdD,KAAKE,MAAO,EACZF,KAAKG,SAAW,KAChBH,KAAKI,OAAQ,EACM,iBAARL,GACVM,OAAOC,OAAON,KAAMD,GAGrBC,KAAKvB,IAAM,4BAAcuB,KAAKvB,IAC9BuB,KAAKO,OAsCP,OAnCCT,EAAAU,UAAAD,KAAA,eAAAE,EAAAT,KACKU,EAAO,IAAIC,eACfD,EAAKE,QAAU,IACfZ,KAAKd,kBAAoBwB,EAAKxB,iBAAkB,GAChDwB,EAAKxB,iBAAkB,EACvBwB,EAAKG,KAAKb,KAAKC,OAAQD,KAAKvB,IAAKuB,KAAKE,MAElCF,KAAKc,WACRJ,EAAKK,iBAAiB,eAAgBf,KAAKc,WAEvCd,KAAKI,QACTM,EAAKK,iBAAiB,SAAU,YAChCL,EAAKK,iBAAiB,gBAAiB,aAGxCL,EAAKM,OAAS,WACb,GAAwB,IAApBN,EAAKO,WACR,GAAoB,MAAhBP,EAAKQ,OAAgB,CACxB,IAAIC,EACAT,EAAKU,WACRD,EAAUE,KAAKC,MAAMZ,EAAKU,WAE3BX,EAAK/B,KAAKyC,OAEN,CACJ,IAAII,EAAQ,IAAInC,MAAM,wBACtBqB,EAAKtB,MAAMoC,KAIdb,EAAKc,QAAU,SAACD,GACfd,EAAKtB,MAAMoC,IAEZb,EAAKH,KAAKP,KAAKG,WAEjBL,EA1DA,GA4DA5B,EAAAC,QAAe2B","file":"static/js/6.7f4457840d7aca017ee0.js","sourcesContent":["import * as React from 'react';\nimport xhr from '../utils/xhr';\nimport { LOGOUT } from '../actions';\nimport {FetchesContext} from '../context'\nconst {\n    useEffect,\n    useContext\n} = React\n//register views\nfunction Logout(props: any) {\n    const {state, dispatch} = useContext(FetchesContext)\n    useEffect(() => {\n        new xhr({\n            url: '/api/users/logout',\n            done: function (callData) {\n                if (callData.code == 0) {\n                    dispatch({type: LOGOUT})\n                    props.history.replace({ pathname: '/' })\n                }\n            },\n            withCredentials: true,\n            faild: function () {\n                var error = new Error('something wrong')\n\n            }\n        })\n    }, [])\n\n    return (<></>)\n}\n\nexport default Logout;","export const LOGIN = 'LOGIN'\nexport const LOGOUT = 'LOGOUT'\nexport const LISTGOODS = 'LISTGOODS';\nexport const SHOWGOOD = 'SHOWGOOD';\nexport const POSTCOMMET = 'POSTCOMMET';\nexport const DELETECOMMET = 'DELETECOMMET';\nexport const LISTCOMMETS = 'LISTCOMMETS';\nexport const DONELOADING = 'DONELOADING';","class xhr {\n\tmethod: string;\n\taysc: boolean;\n\tsendData: any;\n\tcache: boolean;\n\turl: string;\n\tsetHeader: any;\n\tfaild: Function;\n\twithCredentials: true;\n\tdone: Function;\n\tconstructor(opt: any) {\n\t\tthis.method = 'GET';\n\t\tthis.aysc = true;\n\t\tthis.sendData = null;\n\t\tthis.cache = true;\n\t\tif (typeof opt === 'object') {\n\t\t\tObject.assign(this, opt);\n\t\t}\n\t\t//@ts-ignore\n\t\tthis.url = perfixerURL + this.url\n\t\tthis.send();\n\n\t}\n\tsend() {\n\t\tvar _xhr = new XMLHttpRequest();\n\t\t_xhr.timeout = 60000;\n\t\tthis.withCredentials && (_xhr.withCredentials = true);\n\t\t_xhr.withCredentials = true\n\t\t_xhr.open(this.method, this.url, this.aysc);\n\n\t\tif (this.setHeader) {\n\t\t\t_xhr.setRequestHeader(\"Content-Type\", this.setHeader);\n\t\t}\n\t\tif (!this.cache) {\n\t\t\t_xhr.setRequestHeader(\"Pragma\", \"no-cache\");\n\t\t\t_xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n\t\t}\n\n\t\t_xhr.onload = () => {\n\t\t\tif (_xhr.readyState === 4) {\n\t\t\t\tif (_xhr.status === 200) {\n\t\t\t\t\tvar sucData;\n\t\t\t\t\tif (_xhr.response) {\n\t\t\t\t\t\tsucData = JSON.parse(_xhr.response);\n\t\t\t\t\t}\n\t\t\t\t\tthis.done(sucData);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar error = new Error(\"something went wrong\");\n\t\t\t\t\tthis.faild(error);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t_xhr.onerror = (error) => {\n\t\t\tthis.faild(error);\n\t\t}\n\t\t_xhr.send(this.sendData)\n\t}\n}\n\nexport default xhr;"],"sourceRoot":""}