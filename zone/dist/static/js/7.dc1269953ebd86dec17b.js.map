{"version":3,"sources":["webpack:///./script/build/utils/xhr.js","webpack:///./script/build/components/goodslist.js"],"names":["xhr","opt","method","aysc","sendData","cache","Object","assign","url","perfixerURL","send","_xhr","XMLHttpRequest","timeout","withCredentials","open","setHeader","setRequestHeader","onload","readyState","status","sucData","response","JSON","parse","done","error","Error","faild","bind","onerror","data","formatDate","now","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","second","getSeconds","filterContent","words","num","length","slice","mapStateToProps","state","ownProps","listGoods","doneLoading","goodslist","props","self","fetch","credentials","then","res","ok","json","doneLoadingAction","listGoodsAction","obj","map","item","index","goodsid","padding","color","Component","Blog_item","category","itemEle","content","categoryDesc","path","width","height","user","Date","_time","title","comment_count","React","connect"],"mappings":";;;;;;;;;;;;IAAMA,G;AACL,cAAaC,GAAb,EAAkB;AAAA;;AAEjB,OAAKC,MAAL,GAAc,KAAd;AACA,OAAKC,IAAL,GAAY,IAAZ;AACA,OAAKC,QAAL,GAAgB,IAAhB;AACA,OAAKC,KAAL,GAAa,IAAb;AACA,MAAI,QAAOJ,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;AAC5BK,UAAOC,MAAP,CAAc,IAAd,EAAoBN,GAApB;AACA;AACD,OAAKO,GAAL,GAAWC,2BAAWA,GAAG,KAAKD,GAA9B;AACA,OAAKE,IAAL;AAEA;;;;yBACM;AACH,OAAIC,OAAO,IAAIC,cAAJ,EAAX;AACHD,QAAKE,OAAL,GAAe,KAAf;AACA,QAAKC,eAAL,KAAyBH,KAAKG,eAAL,GAAuB,IAAhD;AACAH,QAAKG,eAAL,GAAuB,IAAvB;AACGH,QAAKI,IAAL,CAAU,KAAKb,MAAf,EAAuB,KAAKM,GAA5B,EAAiC,KAAKL,IAAtC;;AAEA,OAAI,KAAKa,SAAT,EAAoB;AACnBL,SAAKM,gBAAL,CAAsB,cAAtB,EAAsC,KAAKD,SAA3C;AACA;AACJ,OAAI,CAAC,KAAKX,KAAV,EAAiB;AAChBM,SAAKM,gBAAL,CAAsB,QAAtB,EAAgC,UAAhC;AACAN,SAAKM,gBAAL,CAAsB,eAAtB,EAAuC,UAAvC;AACA;;AAEEN,QAAKO,MAAL,GAAc,YAAY;AACvB,QAAIP,KAAKQ,UAAL,KAAoB,CAAxB,EAA2B;AACvB,SAAIR,KAAKS,MAAL,KAAgB,GAApB,EAAyB;AACvB,UAAIC,OAAJ;AACA,UAAIV,KAAKW,QAAT,EAAmB;AACfD,iBAAUE,KAAKC,KAAL,CAAWb,KAAKW,QAAhB,CAAV;AACH;AACE,WAAKG,IAAL,CAAUJ,OAAV;AACJ,MAND,MAOI;AACA,UAAIK,QAAQ,IAAIC,KAAJ,CAAU,sBAAV,CAAZ;AACA,WAAKC,KAAL,CAAWF,KAAX;AACH;AACJ;AACH,IAda,CAcZG,IAdY,CAcP,IAdO,CAAd;AAeAlB,QAAKmB,OAAL,GAAe,UAASJ,KAAT,EAAe;AAC3B,SAAKE,KAAL,CAAWF,KAAX;AACF,IAFc,CAEbG,IAFa,CAER,IAFQ,CAAf;AAGAlB,QAAKD,IAAL,CAAU,KAAKN,QAAf;AACH;;;uBACI2B,I,EAAM,CAEV;;;0BACO,CAEP;;;;;;AAGa/B,4DAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA,SAASgC,UAAT,CAAoBC,GAApB,EAAyB;AACvB,MAAIC,OAAOD,IAAIE,WAAJ,EAAX;AACA,MAAIC,QAAQH,IAAII,QAAJ,KAAiB,CAA7B;AACA,MAAIC,OAAOL,IAAIM,OAAJ,EAAX;AACA,MAAIC,OAAOP,IAAIQ,QAAJ,EAAX;AACA,MAAIC,SAAST,IAAIU,UAAJ,EAAb;AACA,MAAIC,SAASX,IAAIY,UAAJ,EAAb;AACA,SACEX,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,IAA3B,GAAkC,KAAlC,GAA0CE,IAA1C,GAAiD,GAAjD,GAAuDE,MAAvD,GAAgE,GAAhE,GAAsEE,MADxE;AAGD;;AAED,SAASE,aAAT,CAAuBC,KAAvB,EAA8BC,GAA9B,EAAmC;AACjCA,QAAMA,OAAO,GAAb;AACA,SAAOD,MAAME,MAAN,GAAeD,GAAf,GAAqBD,MAAMG,KAAN,CAAY,CAAZ,EAAeF,GAAf,IAAsB,KAA3C,GAAmDD,KAA1D;AACD;;AAED,SAASI,eAAT,CAAyBC,KAAzB,EAAgCC,QAAhC,EAA0C;AACxC,SAAO;AACLC,eAAWF,MAAME,SADZ;AAELC,iBAAaH,MAAMG;AAFd,GAAP;AAID;;IAEKC,S;;;AACJ,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA,iHACXA,KADW;AAElB;;;;wCACmB;AAAA;;AAClB,UAAIC,OAAO,IAAX;AACAC,YAAMlD,2BAAWA,GAAG,iBAApB,EAAuC;AACrCmD,qBAAa;AADwB,OAAvC,EAGGC,IAHH,CAGQ,UAASC,GAAT,EAAc;AAClB,YAAIA,IAAIC,EAAR,EAAY;AACV,iBAAOD,IAAIE,IAAJ,EAAP;AACD;AACF,OAPH,EAQGH,IARH,CAQQ,eAAO;AACX,eAAKJ,KAAL,CAAWQ,iBAAX;AACA,eAAKR,KAAL,CAAWS,eAAX,CAA2BC,IAAIpC,IAA/B;AACD,OAXH;AAYD;;;6BACQ;AACP,UAAIuB,YAAY,KAAKG,KAAL,CAAWH,SAA3B;AACA,UAAI,KAAKG,KAAL,CAAWF,WAAf,EAA4B;AAC1B,YAAID,UAAUL,MAAd,EAAsB;AACpB,iBACE;AAAA;AAAA,cAAI,WAAU,eAAd;AACGK,sBAAUc,GAAV,CAAc,UAACC,IAAD,EAAOC,KAAP;AAAA,qBACb,2DAAC,SAAD,IAAW,KAAKD,KAAKE,OAArB,EAA8B,MAAMF,IAApC,GADa;AAAA,aAAd;AADH,WADF;AAOD;AACD,eACE;AAAA;AAAA,YAAK,OAAO,EAAEG,SAAS,IAAI,KAAf,EAAsBC,OAAO,MAA7B,EAAZ;AAAA;AAAA,SADF;AAGD;;AAED,aAAO;AAAA;AAAA,UAAK,WAAU,eAAf;AAAA;AAAA,OAAP;AACD;;;;EArCqBC,+C;;IAuClBC,S;;;;;;;;;;;wCACgB,CAAE;;;6BAEb;AACP,UAAIN,OAAO,KAAKZ,KAAL,CAAWY,IAAtB;AACA,UAAIO,WAAWP,KAAKO,QAApB;AACA,UAAIC,OAAJ;AACA,UAAIC,UAAUT,KAAKS,OAAL,GAAe;AAAA;AAAA;AAAMT,aAAKS;AAAX,OAAf,GAA2C,EAAzD;AACA,UAAIC,eAAe,IAAnB;AACA,cAAQH,QAAR;AACE,aAAK,OAAL;AACEG,yBAAe,IAAf;AACAF,oBACE;AAAA;AAAA,cAAK,WAAU,UAAf;AACE;AACE,mBAAK,wBAAwBR,KAAKW,IADpC;AAEE,qBAAOX,KAAKY,KAFd;AAGE,sBAAQZ,KAAKa;AAHf;AADF,WADF;AASA;AACF,aAAK,OAAL;AACEH,yBAAe,IAAf;AACAF,oBACE;AAAA;AAAA,cAAK,WAAU,UAAf;AACE;AACE,mBAAK,wBAAwBR,KAAKW,IADpC;AAEE,wBAAS,UAFX;AAGE;AAHF;AADF,WADF;AASA;AACF,aAAK,MAAL;AACED,yBAAe,IAAf;AACAF,oBAAU,EAAV;AACA;AACF;AACE;AA9BJ;AAgCA,aACE;AAAA;AAAA,UAAI,WAAU,MAAd;AACE;AAAC,uEAAD;AAAA,YAAM,IAAI,mBAAmBR,KAAKE,OAAlC;AACE;AAAA;AAAA;AAAI;AAAA;AAAA,gBAAM,WAAU,QAAhB;AAA0BF,mBAAKc,IAA/B;AAAA;AAAwCJ;AAAxC,aAAJ;AAAgE;AAAA;AAAA,gBAAI,WAAU,MAAd;AAAsB/C,yBAAW,IAAIoD,IAAJ,CAASf,KAAKgB,KAAd,CAAX;AAAtB;AAAhE,WADF;AAEE;AAAA;AAAA;AAAKhB,iBAAKiB;AAAV,WAFF;AAGGT,iBAHH;AAIE;AAAA;AAAA,cAAG,WAAU,SAAb;AAAwB/B,0BAAcuB,KAAKS,OAAnB;AAAxB,WAJF;AAKE;AAAA;AAAA,cAAG,WAAU,MAAb;AAAoB,8EAAG,WAAU,WAAb,GAApB;AAAkDT,iBAAKkB;AAAvD;AALF;AADF,OADF;AAWD;;;;EApDqBC,4CAAKA,CAACd,S;;AAsDfe,kIAAOA,CAACtC,eAAR,EAAyB,EAAEe,yFAAF,EAAmBD,6FAAnB,EAAzB,EACbT,SADa,CAAf,E","file":"static/js/7.dc1269953ebd86dec17b.js","sourcesContent":["class xhr {\n\tconstructor (opt) {\n\n\t\tthis.method = 'GET';\n\t\tthis.aysc = true;\n\t\tthis.sendData = null;\n\t\tthis.cache = true;\n\t\tif (typeof opt === 'object') {\n\t\t\tObject.assign(this, opt);\n\t\t}\n\t\tthis.url = perfixerURL + this.url\n\t\tthis.send();\n\n\t}\n\tsend() {\n\t    var _xhr = new XMLHttpRequest();\n\t\t_xhr.timeout = 60000;\n\t\tthis.withCredentials && (_xhr.withCredentials = true);\n\t\t_xhr.withCredentials = true\n\t    _xhr.open(this.method, this.url, this.aysc);\n\t\t\n\t    if (this.setHeader) {\n\t    \t_xhr.setRequestHeader(\"Content-Type\", this.setHeader);\t    \n\t    }\n\t\tif (!this.cache) {\n\t\t\t_xhr.setRequestHeader(\"Pragma\", \"no-cache\");\n\t\t\t_xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n\t\t}\n\n\t    _xhr.onload = function () {\n\t       if (_xhr.readyState === 4) {\n\t           if (_xhr.status === 200) {\n\t           \t\tvar sucData;\n\t           \t\tif (_xhr.response) {\n\t                \tsucData = JSON.parse(_xhr.response);\n\t           \t\t}\n\t                this.done(sucData);\n\t           }\n\t           else{\n\t               var error = new Error(\"something went wrong\");\n\t               this.faild(error);\n\t           }\n\t       }\n\t    }.bind(this);\n\t    _xhr.onerror = function(error){\n\t       this.faild(error);\n\t    }.bind(this)\n\t    _xhr.send(this.sendData)\n\t}\n\tdone(data) {\n\n\t}\n\tfaild() {\n\n\t}\n}\n\nexport default xhr;","import React, { Component } from \"react\";\nimport xhr from \"../utils/xhr\";\nimport { connect } from \"react-redux\";\nimport { listGoodsAction, doneLoadingAction } from \"../actions/actions\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport { Map, List, fromJS, OrderedMap, Seq } from \"immutable\";\nfunction formatDate(now) {\n  var year = now.getFullYear();\n  var month = now.getMonth() + 1;\n  var date = now.getDate();\n  var hour = now.getHours();\n  var minute = now.getMinutes();\n  var second = now.getSeconds();\n  return (\n    year + \"-\" + month + \"-\" + date + \"   \" + hour + \":\" + minute + \":\" + second\n  );\n}\n\nfunction filterContent(words, num) {\n  num = num || 100\n  return words.length > num ? words.slice(0, num) + '...' : words\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    listGoods: state.listGoods,\n    doneLoading: state.doneLoading\n  };\n}\n\nclass goodslist extends Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    var self = this;\n    fetch(perfixerURL + \"/api/goods/list\", {\n      credentials: \"include\"\n    })\n      .then(function(res) {\n        if (res.ok) {\n          return res.json();\n        }\n      })\n      .then(obj => {\n        this.props.doneLoadingAction();\n        this.props.listGoodsAction(obj.data);\n      });\n  }\n  render() {\n    var listGoods = this.props.listGoods;\n    if (this.props.doneLoading) {\n      if (listGoods.length) {\n        return (\n          <ul className=\"app-list-page\">\n            {listGoods.map((item, index) => (\n              <Blog_item key={item.goodsid} item={item} />\n            ))}\n          </ul>\n        );\n      }\n      return (\n        <div style={{ padding: 2 + \"rem\", color: \"#333\" }}>暂无数据</div>\n      );\n    }\n\n    return <div className=\"app-list-page\">loading...</div>;\n  }\n}\nclass Blog_item extends React.Component {\n  componentDidMount() {}\n  \n  render() {\n    var item = this.props.item;\n    var category = item.category;\n    var itemEle;\n    var content = item.content ? <div>{item.content}</div> : \"\";\n    let categoryDesc = '笔记'\n    switch (category) {\n      case \"image\":\n        categoryDesc = '图文'\n        itemEle = (\n          <div className=\"wrap-uri\">\n            <img\n              src={\"//res.macsen318.com\" + item.path}\n              width={item.width}\n              height={item.height}\n            />\n          </div>\n        );\n        break;\n      case \"video\":\n        categoryDesc = '视频'\n        itemEle = (\n          <div className=\"wrap-uri\">\n            <video\n              src={\"//res.macsen318.com\" + item.path}\n              controls=\"controls\"\n              autoPlay\n            />\n          </div>\n        );\n        break;\n      case \"note\":\n        categoryDesc = '笔记'\n        itemEle = '';\n        break;\n      default:\n        break;\n    }\n    return (\n      <li className=\"item\">\n        <Link to={\"/goods/detail/\" + item.goodsid}>\n          <h2><span className=\"avator\">{item.user}发布了{categoryDesc}</span><em className=\"time\">{formatDate(new Date(item._time))}</em></h2>\n          <h3>{item.title}</h3>\n          {itemEle}\n          <p className=\"content\">{filterContent(item.content)}</p>\n          <p className=\"more\"><i className=\"i-comment\"></i>{item.comment_count}</p>\n        </Link>\n      </li>\n    );\n  }\n}\nexport default connect(mapStateToProps, { listGoodsAction, doneLoadingAction })(\n  goodslist\n);\n"],"sourceRoot":""}