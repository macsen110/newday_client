{"version":3,"sources":["webpack:///./script/build/utils/xhr.js","webpack:///./script/build/components/goodslist.js"],"names":["xhr","opt","method","aysc","sendData","cache","Object","assign","url","perfixerURL","send","_xhr","XMLHttpRequest","timeout","withCredentials","open","setHeader","setRequestHeader","onload","readyState","status","sucData","response","JSON","parse","done","error","Error","faild","bind","onerror","data","formatDate","now","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","second","getSeconds","filterContent","words","num","length","slice","mapStateToProps","state","ownProps","listGoods","doneLoading","goodslist","props","self","fetch","credentials","then","res","ok","json","obj","doneLoadingAction","listGoodsAction","map","item","index","goodsid","padding","color","Component","Blog_item","category","itemEle","content","categoryDesc","path","width","height","user","Date","_time","title","comment_count","React","connect"],"mappings":"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","file":"static/js/8.e3edf2a34d3da015c382.js","sourcesContent":["class xhr {\n\tconstructor (opt) {\n\n\t\tthis.method = 'GET';\n\t\tthis.aysc = true;\n\t\tthis.sendData = null;\n\t\tthis.cache = true;\n\t\tif (typeof opt === 'object') {\n\t\t\tObject.assign(this, opt);\n\t\t}\n\t\tthis.url = perfixerURL + this.url\n\t\tthis.send();\n\n\t}\n\tsend() {\n\t    var _xhr = new XMLHttpRequest();\n\t\t_xhr.timeout = 60000;\n\t\tthis.withCredentials && (_xhr.withCredentials = true);\n\t\t_xhr.withCredentials = true\n\t    _xhr.open(this.method, this.url, this.aysc);\n\t\t\n\t    if (this.setHeader) {\n\t    \t_xhr.setRequestHeader(\"Content-Type\", this.setHeader);\t    \n\t    }\n\t\tif (!this.cache) {\n\t\t\t_xhr.setRequestHeader(\"Pragma\", \"no-cache\");\n\t\t\t_xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n\t\t}\n\n\t    _xhr.onload = function () {\n\t       if (_xhr.readyState === 4) {\n\t           if (_xhr.status === 200) {\n\t           \t\tvar sucData;\n\t           \t\tif (_xhr.response) {\n\t                \tsucData = JSON.parse(_xhr.response);\n\t           \t\t}\n\t                this.done(sucData);\n\t           }\n\t           else{\n\t               var error = new Error(\"something went wrong\");\n\t               this.faild(error);\n\t           }\n\t       }\n\t    }.bind(this);\n\t    _xhr.onerror = function(error){\n\t       this.faild(error);\n\t    }.bind(this)\n\t    _xhr.send(this.sendData)\n\t}\n\tdone(data) {\n\n\t}\n\tfaild() {\n\n\t}\n}\n\nexport default xhr;","import React, { Component } from \"react\";\nimport xhr from \"../utils/xhr\";\nimport { connect } from \"react-redux\";\nimport { listGoodsAction, doneLoadingAction } from \"../actions/actions\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport { Map, List, fromJS, OrderedMap, Seq } from \"immutable\";\nfunction formatDate(now) {\n  var year = now.getFullYear();\n  var month = now.getMonth() + 1;\n  var date = now.getDate();\n  var hour = now.getHours();\n  var minute = now.getMinutes();\n  var second = now.getSeconds();\n  return (\n    year + \"-\" + month + \"-\" + date + \"   \" + hour + \":\" + minute + \":\" + second\n  );\n}\n\nfunction filterContent(words, num) {\n  num = num || 100\n  return words.length > num ? words.slice(0, num) + '...' : words\n}\n\nfunction mapStateToProps(state, ownProps) {\n  return {\n    listGoods: state.listGoods,\n    doneLoading: state.doneLoading\n  };\n}\n\nclass goodslist extends Component {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    var self = this;\n    fetch(perfixerURL + \"/api/goods/list\", {\n      credentials: \"include\"\n    })\n      .then(function(res) {\n        if (res.ok) {\n          return res.json();\n        }\n      })\n      .then(obj => {\n        this.props.doneLoadingAction();\n        this.props.listGoodsAction(obj.data);\n      });\n  }\n  render() {\n    var listGoods = this.props.listGoods;\n    if (this.props.doneLoading) {\n      if (listGoods.length) {\n        return (\n          <ul className=\"app-list-page\">\n            {listGoods.map((item, index) => (\n              <Blog_item key={item.goodsid} item={item} />\n            ))}\n          </ul>\n        );\n      }\n      return (\n        <div style={{ padding: 2 + \"rem\", color: \"#333\" }}>暂无数据</div>\n      );\n    }\n\n    return <div className=\"app-list-page\">loading...</div>;\n  }\n}\nclass Blog_item extends React.Component {\n  componentDidMount() {}\n  \n  render() {\n    var item = this.props.item;\n    var category = item.category;\n    var itemEle;\n    var content = item.content ? <div>{item.content}</div> : \"\";\n    let categoryDesc = '笔记'\n    switch (category) {\n      case \"image\":\n        categoryDesc = '图文'\n        itemEle = (\n          <div className=\"wrap-uri\">\n            <img\n              src={\"//res.macsen318.com\" + item.path}\n              width={item.width}\n              height={item.height}\n            />\n          </div>\n        );\n        break;\n      case \"video\":\n        categoryDesc = '视频'\n        itemEle = (\n          <div className=\"wrap-uri\">\n            <video\n              src={\"//res.macsen318.com\" + item.path}\n              controls=\"controls\"\n              autoPlay\n            />\n          </div>\n        );\n        break;\n      case \"note\":\n        categoryDesc = '笔记'\n        itemEle = '';\n        break;\n      default:\n        break;\n    }\n    return (\n      <li className=\"item\">\n        <Link to={\"/goods/detail/\" + item.goodsid}>\n          <h2><span className=\"avator\">{item.user}发布了{categoryDesc}</span><em className=\"time\">{formatDate(new Date(item._time))}</em></h2>\n          <h3>{item.title}</h3>\n          {itemEle}\n          <p className=\"content\">{filterContent(item.content)}</p>\n          <p className=\"more\"><i className=\"i-comment\"></i>{item.comment_count}</p>\n        </Link>\n      </li>\n    );\n  }\n}\nexport default connect(mapStateToProps, { listGoodsAction, doneLoadingAction })(\n  goodslist\n);\n"],"sourceRoot":""}