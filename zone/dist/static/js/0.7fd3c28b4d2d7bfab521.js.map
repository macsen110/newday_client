{"version":3,"sources":["webpack:///static/js/0.7fd3c28b4d2d7bfab521.js","webpack:///./script/build/components/login.js"],"names":["webpackJsonp","180","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1__utils_xhr__","__WEBPACK_IMPORTED_MODULE_2_react_router_dom__","__WEBPACK_IMPORTED_MODULE_3_react_redux__","__WEBPACK_IMPORTED_MODULE_4__actions_actions__","__WEBPACK_IMPORTED_MODULE_5_yao_m_ui__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","Login","_React$Component","context","this","_this","getPrototypeOf","handleSubmit","bind","e","_this2","preventDefault","form","refs","registerForm","senddatas","JSON","stringify","username","password","test","url","action","Promise","resolve","reject","setHeader","sendData","method","done","callData","faild","error","Error","then","obj","code","msg","cb","initAction","isLogin","history","push","pathname","console","log","a","createElement","id","className","ref","onSubmit","type","name","placeholder","to","nextProps","location","Component"],"mappings":"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","file":"static/js/0.7fd3c28b4d2d7bfab521.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 180:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_xhr__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_router_dom__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_redux__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__actions_actions__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_yao_m_ui__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_yao_m_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_yao_m_ui__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n// import createBrowserHistory from 'history/createBrowserHistory';\n// const history = createBrowserHistory();\n//Login views\n/**\n * \n */\n\nvar Login = function (_React$Component) {\n    _inherits(Login, _React$Component);\n\n    //static contextTypes = Object.assign({},{history: PropTypes.history});\n\n    function Login(props, context) {\n        _classCallCheck(this, Login);\n\n        var _this = _possibleConstructorReturn(this, (Login.__proto__ || Object.getPrototypeOf(Login)).call(this, props, context));\n\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        return _this;\n    }\n\n    _createClass(Login, [{\n        key: 'handleSubmit',\n        value: function handleSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n            var form = this.refs.registerForm;\n            if (!form['username'].value) {\n                __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_yao_m_ui__[\"showPrompt\"])('请填写用户名!');\n                return false;\n            }\n            if (!form['password'].value) {\n                __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_yao_m_ui__[\"showPrompt\"])('请填写密码');\n                return false;\n            }\n            var senddatas = JSON.stringify({\n                username: form['username'].value,\n                password: form['password'].value,\n                test: null\n            });\n\n            var url = form.action;\n            var promise = new Promise(function (resolve, reject) {\n                new __WEBPACK_IMPORTED_MODULE_1__utils_xhr__[\"a\" /* default */]({\n                    setHeader: 'application/json',\n                    sendData: senddatas,\n                    method: 'POST',\n                    url: url,\n                    done: function done(callData) {\n                        resolve(callData);\n                    },\n                    faild: function faild() {\n                        var error = new Error('something wrong');\n                        reject(error);\n                    }\n\n                });\n            });\n            promise.then(function (obj) {\n                if (obj.code == 0) {\n                    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5_yao_m_ui__[\"showPrompt\"])({\n                        msg: obj.msg,\n                        cb: function cb() {\n                            _this2.props.initAction({ isLogin: obj.isLogin });\n                            _this2.props.history.push({ pathname: '/goods/upload' });\n                        }\n                    });\n                };\n            }, function (error) {\n                return console.log(error);\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                { id: 'register_page', className: 'app-register-page' },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'p',\n                    { className: 'page-title' },\n                    'login'\n                ),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                    'form',\n                    { method: 'post', action: '/api/users/validuser', className: 'form1', ref: 'registerForm', onSubmit: this.handleSubmit },\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'p',\n                        { className: 'pt20' },\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('input', { type: 'text', name: 'username', className: 'ipt', placeholder: 'username' })\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'p',\n                        { className: 'pt20' },\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('input', { type: 'password', name: 'password', className: 'ipt', placeholder: 'password' })\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        'p',\n                        { className: 'pt20' },\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('input', { type: 'submit', className: 'btn' })\n                    ),\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                        __WEBPACK_IMPORTED_MODULE_2_react_router_dom__[\"e\" /* Link */],\n                        { to: '/user/register' },\n                        '\\u6CE8\\u518C'\n                    )\n                )\n            );\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.location !== this.props.location) {\n                // navigated!\n            }\n        }\n    }]);\n\n    return Login;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3_react_redux__[\"b\" /* connect */])(null, { initAction: __WEBPACK_IMPORTED_MODULE_4__actions_actions__[\"g\" /* initAction */] })(Login));\n\n ;(function register() { /* react-hot-loader/webpack */ if (false) { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } /* eslint-disable camelcase, no-undef */ var webpackExports = typeof __webpack_exports__ !== 'undefined' ? __webpack_exports__ : module.exports; /* eslint-enable camelcase, no-undef */ if (typeof webpackExports === 'function') { __REACT_HOT_LOADER__.register(webpackExports, 'module.exports', \"/Users/macsen/Desktop/Macsen/newday_client/zone/app/script/build/components/login.js\"); return; } /* eslint-disable no-restricted-syntax */ for (var key in webpackExports) { /* eslint-enable no-restricted-syntax */ if (!Object.prototype.hasOwnProperty.call(webpackExports, key)) { continue; } var namedExport = void 0; try { namedExport = webpackExports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/Users/macsen/Desktop/Macsen/newday_client/zone/app/script/build/components/login.js\"); } } })();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/0.7fd3c28b4d2d7bfab521.js","import React from 'react';\nimport xhr from '../utils/xhr';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link\n} from 'react-router-dom';\nimport {connect} from 'react-redux'; \nimport {initAction} from '../actions/actions';\nimport {showPrompt} from 'yao-m-ui';\n// import createBrowserHistory from 'history/createBrowserHistory';\n// const history = createBrowserHistory();\n//Login views\n/**\n * \n */\nclass Login extends React.Component {\n    //static contextTypes = Object.assign({},{history: PropTypes.history});\n\n    constructor(props, context) {       \n        super(props, context);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    handleSubmit(e) {\n        e.preventDefault();\n        var form = this.refs.registerForm;\n        if (!form['username'].value) {\n            showPrompt('请填写用户名!');\n            return false;\n        }\n        if (!form['password'].value) {\n            showPrompt('请填写密码');\n            return false;\n        }\n        var senddatas = JSON.stringify({\n            username:form['username'].value,\n            password: form['password'].value,\n            test: null\n        });\n        \n        var url = form.action;\n        var promise = new Promise(function(resolve, reject ){\n            new xhr({\n                setHeader:  'application/json',\n                sendData: senddatas,\n                method: 'POST',\n                url: url,\n                done: function(callData) {\n                    resolve(callData)\n                },\n                faild: function() {\n                    var error = new Error('something wrong')\n                    reject(error)\n                }\n\n            })\n\n        })        \n        promise.then(\n            obj => {\n                if(obj.code == 0) {\n                    showPrompt({\n                        msg: obj.msg,\n                        cb:  ()=> {\n                            this.props.initAction({isLogin: obj.isLogin})\n                            this.props.history.push({pathname: '/goods/upload'})\n                        }\n                    });\n                };\n            }, \n            error => console.log(error)\n        )\n    }\n    render() {\n        return (\n            <div id=\"register_page\" className=\"app-register-page\">\n                <p className=\"page-title\">login</p>\n                <form method=\"post\" action=\"/api/users/validuser\" className=\"form1\" ref = \"registerForm\" onSubmit={this.handleSubmit}>\n                    <p className=\"pt20\"><input type=\"text\" name=\"username\" className=\"ipt\" placeholder=\"username\" /></p>\n                    <p className=\"pt20\"><input type=\"password\" name=\"password\" className=\"ipt\" placeholder=\"password\" /></p>\n                    <p className=\"pt20\"><input type=\"submit\" className=\"btn\" /></p>\n                    <Link to=\"/user/register\">注册</Link>\n                </form>\n            </div>\n        )\n    }\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.location !== this.props.location) {\n            // navigated!\n        }\n    }\n}\nexport default connect(null, {initAction})(Login);\n\n\n// WEBPACK FOOTER //\n// ./script/build/components/login.js"],"sourceRoot":""}