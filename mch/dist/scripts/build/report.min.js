webpackJsonp([4],{

/***/ 51:
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = (function ($, template) {
	var pageInitObj = {
		$rootDom: $('#page_container'),
		init: function (stateObj) {
			var self = this;
			var url = '/infanthospital/v1/getReportListDetail';
			var data;
			var repType = stateObj.repType;
			var reportName = stateObj.reportName;
			var objData = {
				request_context: {
					uid: APP.uid,
					repType:repType,
					customerId: APP.profileInfo.customerId,
					reportId: stateObj.reportId,
					appType : APP.openType,
					weekPregnant: stateObj.weekPregnant,
				},
				access_token: localStorage.getItem('token'),
				system: 'mch'
			};
			function oAjax(url){
				$.ajax({
					url:APP.host.api + url,
					data:JSON.stringify(objData),
					cache:true,
					type:'POST',
					contentType:'application/json',
					success:function(response){
						if (response.ret == 1) {
							response.data.repType = repType;
							response.data.reportName = reportName;
							self.ready(stateObj, response.data);
						}
						else {
							APP.ui.showPrompt(response.msg);
							APP.router.endLoading();
						}
					},
					error: function () {
						APP.router.endLoading();
						APP.ui.showPrompt('网络错误,<br>请稍后重试')
					}
				})
			}
			oAjax(url)
		},
		ready: function (stateObj, data) {
			var tplScript = __webpack_require__(73);
			if (APP.router.curPathName == stateObj.pageName) {
				APP.router.setRouter(stateObj, this)
				this.show(stateObj,tplScript, data)
			}
		},
		show: function (stateObj, tplScript, data) {
			var self = this;
			APP.tools.pageCount();
			self.$rootDom.html(tplScript); 
			data.isPayed =  APP.profileInfo.superMm; 
			data.host = APP.host.api;         
			var html = template('report_template', data);
			self.$rootDom.prepend(html);
			self.bindUI(stateObj); 
		},
		bindUI: function (stateObj) {
			var self = this;
			self.setPageInfo(stateObj);
			self.$rootDom.addClass('page-report visibile'); 
			var $voiceBtn = self.$rootDom.find('.icon-voice-baby');
			var audio = self.$rootDom.find('.voice-audio')[0];
			
			$voiceBtn.on('click', function () {
				if(audio.paused){
					audio.play();
				}else{
					audio.pause();
				}
			});
			 //B超图片显示
			self.$rootDom.find('.b-photos-box .item').on('click', function () {
				var src = $(this).find('img').attr('src');
				self._showLargeImg(src)
			})
			self.$rootDom.find('.larger-img-container').on('click', function () {
				$(this).hide()
			})
			   
		},
		 _showLargeImg: function (src) {
			var self = this;
			self.$rootDom.find('.larger-img-container')
				.show()
				.find('img')
				.attr('src', src)
		},   
		setPageInfo: function (stateObj) {
			function getTitleById(id) {
				var title;
				switch (id) {
					case '01':
						title = '唐氏报告详情'
						break;
					case '02': 
						title = '超声报告详情';
						break;
					case '04': 
						title = '病理报告详情';
						break;
					case '05'://检验报告
					default:
						title = '检验报告详情';
				   
				}
				return title;
			}
			APP.tools.setPageTitle(getTitleById(stateObj.repType))
		},
		destroy: function () {
				//如果有事件绑定的话, 解除事件绑定            
				this.$rootDom.removeClass('page-report visibile');
				this.$rootDom.html('');
			}
		}
		return pageInitObj;

	}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))

/***/ }),

/***/ 73:
/***/ (function(module, exports) {

module.exports = "<script id=\"report_template\" type=\"text/template\">\n    <div class=\"report-container\">\n        {{if repType == '02' && isPayed == 1}}\n        {{if top_info.pregnant_week <= 42 &&　top_info.pregnant_week >= 2}}\n        <div class=\"payed-b-info\">\n            <div class=\"wrap-weekPregnant\">\n                <p>孕<strong class=\"pregnant-week-words\">{{top_info.pregnant_week}}</strong>周{{if top_info.pregnant_days > 0}}+{{top_info.pregnant_days}}天{{/if}}</p>\n                <botton class=\"more bind-location\" data-href=\"report_list\" data-options='{\"repType\": \"{{repType}}\",\"reportName\":\"{{ reportName }}\"}'>历史纪录></botton>\n            </div>\n            <p class=\"wrap-desc\">{{top_info.pregnant_desc}}</p>\n            <div class=\"wrap-baby-info\">\n                <div class=\"img-box\">\n                    <img src=\"{{host+top_info.pregnant_img}}\" alt=\"\">\n                </div>\n                <ul class=\"info\">\n                    <li class=\"item\">\n                        <p>距离预产期</p>\n                        <p><strong>{{top_info.due_date}}</strong>天</p> \n                    </li>\n                    \n                    {{if top_info.baby_weight && top_info.baby_weight > 0}}\n                    <li class=\"item\">\n                        <p>宝宝体重</p>\n                        <p><strong>{{top_info.baby_weight}}g</strong></p>\n                    </li>\n                    {{/if}}\n                </ul>\n            </div>\n            <div class=\"wrap-foot-explain\">\n                \n                {{if top_info.pregnant_week == 8}}\n                <p><i class=\"icon icon-voice-label\"></i><i class=\"icon icon-voice-baby\"></i></p>\n                <audio src=\"{{host+center_info.baby_voice}}\" class=\"voice-audio\"></audio>\n                {{else if top_info.pregnant_week >= 13 && top_info.pregnant_week <= 17}}\n                    {{if center_info.biparietal_diameter}}<p>顶臀径:{{center_info.biparietal_diameter}}</p>{{/if}}\n                {{else if top_info.pregnant_week >= 18 && top_info.pregnant_week <= 27}}\n                <p>\n                    {{if center_info.biparietal_diameter}}顶臀径:{{center_info.biparietal_diameter}}{{/if}} \n                    {{if center_info.placenta_position}}胎盘位置: {{center_info.placenta_position}}{{/if}}\n                </p>\n                {{else if top_info.pregnant_week >= 28 && top_info.pregnant_week <= 40}}\n                <p>\n                    {{if center_info.biparietal_diameter}}顶臀径:{{center_info.biparietal_diameter}}, {{/if}}\n                    {{if center_info.femur_length}}股骨长: {{center_info.femur_length}},{{/if}}\n                    {{if center_info.placenta_grade}}胎盘分级: {{center_info.placenta_grade}}{{/if}}\n                </p>\n                {{/if}}\n            </div>\n            {{if center_info.reference_obj}}\n            <ul class=\"diff-box\">\n                <li class=\"item\">\n                    <i class=\"icon\"></i>\n                    <p>宝宝大小</p>\n                </li>\n                <li class=\"item icon\"></li>\n                <li class=\"item\">\n                    <img src=\"{{host+center_info.reference_obj}}\" alt=\"参考物\">\n                    <p>{{center_info.fruitName}}</p>\n                </li>\n            </ul>\n            {{/if}}\n        </div>\n        {{/if}}\n        {{/if}}\n        <header class=\"header border-bottom\">\n            <div class=\"item\">\n                <span class=\"key\">检查项目:</span>\n                {{if repType == '02' && isPayed == 1}}\n                <span class=\"info\">{{buttom_info.inspection_items}}</span>\n                {{else}}\n                <span class=\"info\">{{checkItem}}</span>\n                {{/if}}\n            </div>\n            <div class=\"item\">\n                <span class=\"key\">检查时间:</span>\n                {{if repType == '02' && isPayed == 1}}\n                <span class=\"info\">{{buttom_info.inspection_time}}</span>\n                {{else}}\n                <span class=\"info\">{{checkDate}}</span>\n                {{/if}}\n                \n                {{ if repType == '01' || (repType == '02' && isPayed != 1) || repType == '04' }}\n                <span class=\"bind-location\" data-href=\"report_list\" data-options='{\"repType\": \"{{repType}}\",\"reportName\":\"{{ reportName }}\"}'>查看历史记录 ></span>\n                {{ /if }}\n            </div>\n        </header>\n        <!-- 唐氏 -->\n        {{if repType == '01'}}\n        <div class=\"report-content type-1 border-horizontal\">\n            <div class=\"box border-bottom\">\n                <div class=\"title\">样本信息</div>\n                <table class=\"comm-table report-table report-table2\">\n                    <thead>\n                        <tr>\n                            <td>标记物</td>\n                            <td>结果</td>\n                            <td>单位</td>\n                            <td>矫正值MOM</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{each sampleInformationList as value}}\n                        <tr>\n                            <td>{{value.tag}}</td>\n                            <td>{{value.result}}</td>\n                            <td>{{value.unit}}</td>\n                            <td>{{value.correctionMOM}}</td>\n                        </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            </div>\n            <div class=\"box border-bottom\">\n                <div class=\"title\">风险计算项目</div>\n                <table class=\"comm-table report-table\">\n                    <thead>\n                        <tr>\n                            <td>筛查项目</td>\n                            <td>风险值</td>\n                            <td>风险结果</td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{each riskComputation as value}}\n                        <tr>\n                            <td>{{value.screening}}</td>\n                            <td>{{value.riskValue}}</td>\n                            <td>{{value.riskResult}}</td>\n                        </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class=\"report-tip\">\n            <p>{{illustrate}}</p>\n        </div>\n        <!-- 超声报告 -->\n        {{else if repType == '02'}}\n        \n        {{if isPayed == 1}}\n        <div class=\"report-content type-2 border-horizontal\">\n            <div class=\"box border-bottom\">\n                <div class=\"title\">诊断提示</div>\n                <div class=\"con\">\n                    {{each buttom_info.diagnosis_prompt as value}}\n                    <p>{{value}}</p>\n                    {{/each}}\n                </div>\n            </div>\n            <div class=\"box border-bottom\">\n                <div class=\"title\">超声结果</div>\n                <div class=\"con\">\n                    {{each buttom_info.ultrasound_result as value}}\n                    <p>{{value}}</p>\n                    {{/each}}\n                </div>\n            </div>\n            {{if b_mode_phones.length}}\n            <div class=\"box b-photos-box\">\n                <div class=\"title\">B超照片</div>\n                <ul class=\"list clear\">\n                    {{each b_mode_phones}}\n                    <li class=\"item\">\n                        <img src=\"{{$value}}\" alt=\"\" class=\"img\">\n                    </li>\n                    {{/each}}\n                </ul>\n            </div>\n            {{/if}}\n\n        </div>\n        {{else}}\n\n        <div class=\"report-content type-2 border-horizontal\">\n            <div class=\"box border-bottom\">\n                <div class=\"title\">诊断提示</div>\n                <div class=\"con\">\n                    {{each diagnosticTips as value}}\n                    <p>{{value}}</p>\n                    {{/each}}\n                </div>\n            </div>\n            <div class=\"box border-bottom\">\n                <div class=\"title\">超声结果</div>\n                <div class=\"con\">\n                    {{each ultrasonicResult as value}}\n                    <p>{{value}}</p>\n                    {{/each}}\n                </div>\n            </div>\n        </div>\n\n        {{/if}}\n        {{else if repType == '04'}}\n        <!--04 病理报告-->\n        <div class=\"report-content type-4\">\n            <div class=\"box border-bottom\">\n                <div class=\"title details-title\">病理诊断</div>\n                <div class=\"con details-table\">\n                    <table>\n                        <tr>\n                            <td>标本满意度：{{pathologicDiagnosis.specimenSatisfaction}}</td>\n                            <td>细胞量：{{pathologicDiagnosis.metaplasiaCells}}</td>\n                        </tr>\n                        <tr>\n                            <td>颈管细胞：{{pathologicDiagnosis.cellMass}}</td>\n                            <td>化生细胞：{{pathologicDiagnosis.BacterialTransformation}}</td>\n                        </tr>\n                        <tr>\n                            <td>菌群转变：{{pathologicDiagnosis.neckCanalCell}}</td>\n                            <td></td>\n                        </tr>\n                    </table>\n                </div> \n            </div>\n            <div class=\"box border-bottom\">\n                <div class=\"title details-title\">细胞学</div>\n                <div class=\"con details-table\">\n                    <table>\n                        <tr>\n                            <td>滴虫感染提示：{{cytology.herpesInfection}}</td>\n                            <td>念珠感染提示：{{cytology.trichomonasInfection}}</td>\n                        </tr>\n                        <tr>\n                            <td>HPV感染提示：{{cytology.candidaInfection}}</td>\n                            <td>疱疹感染提示：{{cytology.HPVInfection}}</td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n            <div class=\"box border-bottom\">\n                <div class=\"title details-title\">TBS诊断</div>\n                <div class=\"con\">\n                    <p>{{TBSDiagnosis}}</p>\n                </div>\n            </div>\n        </div>\n        {{else if repType == '05'}}\n        <!--05 检验报告-->\n        <div class=\"report-content type-5 border-horizontal\">\n            <table class=\"comm-table report-table\">\n                <thead>\n                    <tr>\n                        <td>项目</td>\n                        <td>结果</td>\n                        <td>参考值</td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {{each items as value}}\n\n                        <tr  class=\"{{ value.insTip?'xb-table-red':'' }}\">\n                            <td>{{value.insItemName}}</td>\n                            <td>{{value.insResult}}{{ value.insTip?value.insTip:'' }}</td>\n                            <td>{{value.insRef}}</td>\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        </div>\n        {{ /if }}\n    </div>\n    <div class=\"larger-img-container\"><img class=\"img\" src=\"\" alt=\"\"></div>\n</script>\n";

/***/ })

});