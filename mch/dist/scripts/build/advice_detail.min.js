webpackJsonp([20],{33:function(a,t,n){var e,i;e=[n(0),n(2)],void 0!==(i=function(a,t){return{$rootDom:a("#page_container"),hasInput:0,ready:function(a,t){var e=this,i=n(57);APP.router.curPathName==a.pageName&&(APP.router.setRouter(a,e),e.show(i,t))},show:function(a,n){var e=this;APP.tools.pageCount(),e.$rootDom.html(a);var i=t("advice_detail_template",n);e.$rootDom.prepend(i),e.bindUI(a,n)},setPageInfo:function(a){var t={1:"产检报告相关",2:"候诊相关",3:"我的信息有误",4:"建议新增功能",5:"超级妈咪相关",6:"其他"};APP.tools.setPageTitle(t[a])},bindUI:function(t,n){var e=this;e.setPageInfo(n.type),APP.selectBottomNav(-2),e.$rootDom.addClass("page-advice-detail visibile"),e.ele={},e.$eles={$ipt:e.$rootDom.find(".advice-textarea"),$btn:e.$rootDom.find(".comm-btn"),$tags:e.$rootDom.find(".wrap-tags"),$mobile:e.$rootDom.find(".mobile-ipt")},e.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,e.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame,e._listenId=e.requestAnimationFrame.call(null,e._listenBtnStatus.bind(e)),e.$eles.$ipt.on("input",function(){e._listenIpt(a(this))}),e.$eles.$tags.find(".tag").on("click",function(){e._toggleTag(a(this))}),e.$eles.$btn.on("click",function(){e._submit(n.type)})},_listenIpt:function(t){var n=a.trim(t.val()),e=n.length,i=t.data("max"),s=t.next().find("span");e=e>i?i:e,e>i&&t.val(n.slice(0,i)),s.text(e)},_toggleTag:function(a){var t=this;a.hasClass("select")?a.removeClass("select"):(t.$eles.$tags.find(".tag").removeClass("select"),a.addClass("select"))},_submit:function(t){var n=this,e=a.trim(n.$eles.$mobile.val());if(""==e)return APP.ui.showPrompt("请填写电话号码!"),void n.$eles.$mobile.focus();if(!APP.tools.regExpObj.mobile.test(e))return APP.ui.showPrompt("电话号码格式不正确!"),void n.$eles.$mobile.focus();var i={request_context:{customerId:APP.profileInfo.customerId,uid:APP.uid,appType:APP.openType,changeMobile:e,classify1:t,tag:n.$eles.$tags.find(".select").data("index"),feedBack:a.trim(n.$eles.$ipt.val())},access_token:localStorage.getItem("token"),system:"mch"};a.ajax({url:APP.host.api+"/infanthospital/v1/customerFeedBack",data:JSON.stringify(i),type:"post",contentType:"application/json",success:function(a){if(1==a.ret)return n._saveAdvicemobile(i.changeMobile,i.uid),void APP.ui.showPrompt("提交成功",function(){APP.router.gotoPage({pageName:"profile"})});APP.ui.showPrompt(a.msg)}})},_saveAdvicemobile:function(a,t){localStorage.setItem("adviceMobileObj",JSON.stringify({uid:t,mobile:a}))},init:function(a){var t,n,e=this;localStorage.adviceMobileObj&&(n=JSON.parse(localStorage.adviceMobileObj)),n&&(t=n.uid==APP.uid?n.mobile:APP.profileInfo.mobile);var i={type:a.classify1,mobile:t};e.ready(a,i)},_listenBtnStatus:function(){var t=this;""!=a.trim(t.$eles.$ipt.val())||t.$eles.$tags.find(".select").length?t.$eles.$btn.removeAttr("disabled"):t.$eles.$btn.attr("disabled",!0),t._listenId=t.requestAnimationFrame.call(null,t._listenBtnStatus.bind(t))},destroy:function(){this.$rootDom.removeClass("page-advice-detail visibile"),this.$rootDom.html(""),this.cancelAnimationFrame.call(null,this._listenId)}}}.apply(t,e))&&(a.exports=i)},57:function(a,t){a.exports='<script id=advice_detail_template type=text/html> <div class="mobile-container"><i class="icon"></i>联系方式\n        {{if mobile}}<i class="icon-sign-right"></i>{{/if}}\n        <input type="tel" value="{{mobile ? mobile : \'\'}}" class="mobile-ipt" placeholder="请输入手机号">\n        \n    </div>\n    <div class="advice-main-input">\n        <textarea class="advice-textarea" data-max="500" placeholder="请留下就诊卡号，所在院区及门诊类型(如:东院普通门诊),问题描述, 我们会在2个工作日内和您联系处理并帮助您处理."></textarea>\n        <div class="advice-num"><span>0</span>/500</div>\n    </div>\n    {{if type == 1}}\n    <ul class="wrap-tags">\n        <li class="item">\n            <span class="tag" data-index="1">已有检查报告没有显示</span>\n        </li>\n        <li class="item">\n            <span class="tag" data-index="2">检查报告不是本人的报告</span>\n        </li>\n        <li class="item">\n            <span class="tag" data-index="3">检查项目显示有误</span>\n            <span class="tag" data-index="4">报告显示日期有误</span>\n        </li>\n    </ul>\n    {{/if}}\n    {{if type == 2}}\n    <ul class="wrap-tags">\n        <li class="item">\n            <span class="tag" data-index="1">候诊信息没有显示</span>\n            <span class="tag" data-index="2">检查楼层有误</span>\n        </li>\n        <li class="item">\n            <span class="tag" data-index="3">候诊信息不能更新</span>\n        </li>\n    </ul>\n    {{/if}}\n    {{if type == 3}}\n    <ul class="wrap-tags">\n        <li class="item">\n            <span class="tag" data-index="1">名字录入错误</span>\n             <span class="tag" data-index="2">手机号码错误</span>\n        </li>\n        <li class="item">\n           <span class="tag" data-index="3">末次月经错误</span>\n           <span class="tag" data-index="4">预产期错误</span>\n        </li>\n    </ul>\n    {{/if}}\n    {{if type == 4}}\n    <ul class="wrap-tags">\n        <li class="item">\n            <span class="tag" data-index="1">门诊线上预约</span>\n            <span class="tag" data-index="2">建卡资料线上填写</span>\n        </li>\n        <li class="item">\n            <span class="tag" data-index="3">报告生成推送提醒</span>\n            <span class="tag" data-index="4">排队信息推送提醒</span>\n        </li>\n        <li class="item">\n            <span class="tag" data-index="5">报告详细解读</span>\n            <span class="tag" data-index="6">B超影像资料</span>\n        </li>\n    </ul>\n    {{/if}}\n    {{if type == 5}}\n    <ul class="wrap-tags">\n        <li class="item">\n            <span class="tag" data-index="1">个人信息错误</span>\n            <span class="tag" data-index="2">B超照片无法展示</span>\n        </li>\n        <li class="item">\n            <span class="tag" data-index="3">购买遇到问题</span>\n        </li>\n    </ul>\n    {{/if}}\n    <div class="advice-button">\n        <button type="button" class="comm-btn" disabled>提交</button>\n    </div> <\/script>'}});