webpackJsonp([1],{53:function(e,s,n){var a,i;a=[n(0),n(2)],void 0!==(i=function(e,s){return{$rootDom:e("#page_container"),isBindCard:!1,ready:function(e,s){var a=this,i=n(75);APP.router.curPathName==e.pageName&&(APP.router.setRouter(e,a),a.show(i,s))},show:function(e,n){var a=this;APP.tools.pageCount(),a.$rootDom.html(e);var i;i=1==n.isToday?s("wait_unbind_card_template",n):a.isBindCard?s("wait_bind_card_template",n):s("wait_unbind_card_template",n),a.$rootDom.prepend(i),APP.selectBottomNav(1),a.bindUI()},setPageInfo:function(){APP.tools.setPageTitle("我的候诊")},bindUI:function(){var s=this;s.setPageInfo(),s.$rootDom.addClass("page-wait-doctor visibile"),e(".unbind-card-container .widget-tip-box").on("click",function(){var s=e(this).attr("data-href");setTimeout(function(){window.location.href=s},800)}),s.isBindCard&&!sessionStorage.getItem("queueIsToday")&&s._startTimeCount()},init:function(e){var s=this,n=APP.profileInfo;1==n.emStatus&&s.unbindCard(e),2==n.emStatus&&s.bindCard(e)},bindCard:function(s){var n=this;n.isBindCard=!0;var a=APP.profileInfo;if(sessionStorage.getItem("queueIsToday")){var i={isToday:1};return void n.ready(s,i)}var t={request_context:{uid:a.uid,customerId:a.customerId,appType:APP.openType},access_token:localStorage.getItem("token"),system:"mch"};e.ajax({url:APP.host.api+"/infanthospital/v1/getQueueInfo",type:"post",data:JSON.stringify(t),contentType:"application/json",success:function(e){if(1==e.ret)return e=n._todoResult(e.data),1==e.isToday&&sessionStorage.setItem("queueIsToday",e.isToday),void n.ready(s,e);APP.router.endLoading(),APP.ui.showPrompt(e.msg)},error:function(){APP.router.endLoading(),APP.ui.showPrompt("网络错误,<br>请稍后重试")}})},unbindCard:function(e){var s=this,n=1==APP.openType?"https://wxapi.shqmxx.com/WXOAuth/AuthReceivePage.aspx?customerId=77&applicationId=2b0ff89f27584e3ab81d44d060a4271e&goUrl=https://h5.shqmxx.com/Template/Resource.aspx?Pri=QM.CSFP.77.DIS.UserManage-Binding":"http://alipay.51mch.com/HTML/myCardList.html?userID="+encodeURIComponent(APP.uid);s.ready(e,{uid:APP.uid,unbindCardUrl:n})},_todoResult:function(e){return e},_startTimeCount:function(){this.timeCount=setInterval(function(){APP.router._gotoPage({replace:1,pageName:"waiting_doctor"})},1e4)},_endTimeCount:function(){var e=this;clearInterval(e.timeCount)},destroy:function(){this.$rootDom.html(""),this.$rootDom.removeClass("visibile page-wait-doctor"),this._endTimeCount()}}}.apply(s,a))&&(e.exports=i)},75:function(e,s){e.exports='<script id=wait_unbind_card_template type=text/html> <div class="unbind-card-container">\n        {{if !isToday}}\n        <a class="widget-tip-box" href="javascript:void(0)" data-href="{{unbindCardUrl}}">\n            <p>绑定就诊卡，智能提醒，轻松候诊</p>\n            <i class="sign"></i>\n        </a>\n        {{/if}}\n        <div class="wrap-list-test">\n            \n            <ul class="list">\n                <li class="item">\n                    <p class="desc"><span class="fr"><i class="icon"></i><em class="address">门诊2楼抽血中心</em></span>验血</p>\n                </li>\n                <li class="item">\n                    <p class="desc"><span class="fr"><i class="icon"></i><em class="address">门诊1楼B超</em></span>B超</p>\n                </li>\n                <li class="item">\n                    <p class="desc"><span class="fr"><i class="icon"></i><em class="address">门诊1楼标本收集处</em></span>尿检</p>\n                </li>\n                <li class="item">\n                    <p class="desc"><span class="fr"><i class="icon"></i><em class="address">门诊1楼产科A区</em></span>胎心</p>\n                </li>\n                <li class="item">\n                    <p class="desc"><span class="fr"><i class="icon"></i><em class="address">门诊2楼心电图室</em></span>心电图</p>\n                </li>\n            </ul>\n        </div>\n    </div> <\/script> <script id=wait_bind_card_template type=text/html> <div class="bind-card-container">\n        <div class="widget-head-avatar">\n            <img class="avatar" src="images/icon_avatar_2.png" alt="avatar">\n            <div class="content">\n                <p>{{isToday ? \'今日产检\' : \'下次产检\'}}<em class="status">已孕{{weekPregnant}}周</em></p>\n                <p>{{checkDate}} {{checkWeek}} {{checkTime}}</p>\n            </div>\n        </div>\n        {{if isToday }}\n        <div class="tip-container">\n            <i class="icon"></i>\n            已推荐候诊顺序，若有过号项请咨询护士台\n        </div>\n        <ul class="list">\n            {{each queueList}}\n            {{if $value.id != 5 && $value.id !=6 }}\n            <li class="item type-{{$value.id}} status-{{$value.queueStatus}} {{$value.queueNumberCurrent == $value.queueNumberMine ? \'cur\' : \'\'}}">\n                <i class="icon"></i>\n                <div class="content">\n                    <p class="desc"><em class="test-item-key">检查项目</em><em class="icon icon-location"></em></p>\n                    <p class="desc">{{$value.name}}<span class="fr">{{$value.departmentAddress}}</span></p>\n                    {{if $value.queueNumberMine != null}}\n                    \n                    <ul class="queue-list">\n                            <li class="item">\n                            <p>{{$value.queueNumberCurrent}}</p>\n                            <p>当前叫号</p>\n                        </li>\n                        <li class="item">\n                            <p>{{$value.queueNumberMine}}</p>\n                            <p>我的诊号</p>\n                        </li>\n                        <li class="item">\n                            {{if $value.queueWaitingNumber > 0}}\n                            <p>{{$value.queueWaitingNumber}}</p>\n                            <p>前面人数</p>\n                            {{/if}}\n                            {{if $value.queueWaitingNumber < 0}}<span>已过号</span> {{/if}}\n                            {{if $value.queueWaitingNumber == 0}}<span>已到号</span> {{/if}}\n                            \x3c!--{{if $value.queueStatus == 4}}<p>已完成</p> {{/if}}--\x3e\n                            \x3c!--{{if $value.queueStatus == 5}}<p>已到期</p> {{/if}}--\x3e\n\n\n                        </li>\n                    </ul>\n                    {{/if}}\n                </div>\n            </li>\n            {{/if}}\n            {{if $value.id == 5 || $value.id ==6}}\n            <li class="item type-{{$value.id}}">\n                <i class="icon"></i>\n                <div class="content">\n                    <p class="desc"><em class="test-item-key">检查项目</em><strong>(现场排队)</strong><em class="icon icon-location"></em></p>\n                    <p class="desc">{{$value.name}}<span class="fr">{{$value.departmentAddress}}</span></p>\n                </div>\n            </li>\n            {{/if}}\n            {{/each}}\n        </ul>\n        {{/if}}\n        {{if !isToday }}\n        <ul class="list">\n            {{each queueList}}\n            <li class="item type-{{$value.id}} status-{{$value-queueStatus}}">\n                <i class="icon"></i>\n                <div class="content">\n                    <p class="desc"><em class="test-item-key">检查项目</em>{{if $value.id == 5 || $value.id == 6}}<strong>(现场排队)</strong>{{/if}}<em class="icon icon-location"></em></p>\n                    <p class="desc">{{$value.name}}<span class="fr">{{$value.departmentAddress}}</span></p>\n                    \n                </div>\n            </li>\n            {{/each}}\n        </ul>\n        {{/if}}\n    </div> <\/script> '}});