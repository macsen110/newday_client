{"remainingRequest":"/Users/macsen/Desktop/rltx-webpack/api/rateService.js","dependencies":[{"path":"/Users/macsen/Desktop/rltx-webpack/api/rateService.js","mtime":1511527701000},{"path":"/Users/macsen/Desktop/rltx-webpack/node_modules/_babel-loader@6.2.10@babel-loader/lib/index.js","mtime":1481808750000},{"path":"/Users/macsen/Desktop/rltx-webpack/node_modules/_cache-loader@1.2.0@cache-loader/dist/cjs.js","mtime":1510929699000}],"contextDependencies":[],"result":["/**\n * Created by cc on 2017/6/30.\n */\n\nimport * as utils from './Utils';\nimport * as HTTP from './httpUtil';\n\nconst apiConst = require('./ApiConst'),\n  apiDomain = apiConst.apiLineDomain;\n\n\n/**\n * 获取运价列表\n * @param rateTag      运价标签\n * @param mark          检索\n * @param page          页码\n * @param size          页长\n * @param callback      回调\n */\n// function list(paramObj, cb) {\n//   const apiUrl = `${apiDomain}/resource/rates/list`;\n//   HTTP.get(apiUrl, paramObj, (response, error) => {\n//     cb(response, error);\n//   });\n// }\nfunction list(paramObj, cb) {\n  //GET /logistics/rate_code/list\n  const apiUrl = `${apiConst.apiLogisticsDomain}/logistics/rate_code/list`;\n  HTTP.get(apiUrl, paramObj, (response, error) => {\n    if (error) { cb(null, error); }\n    else {\n      const codeList = [];\n      response.content.forEach((item) => {\n        codeList.push(item.rateCode);\n      });\n      HTTP.get(`${apiDomain}/resource/rates/list`, { code: codeList.join(','), page: 1, size: paramObj.size }, (rep, err) => {\n        if (rep && rep.content && rep.total) {\n          rep.content.forEach((rate) => {\n            const rel = response.content.find(rel => rel.rateCode === rate.code);\n            if (rel) {\n              rate.clientOrgCode = rel.clientOrgCode;\n              rate.clientOrgName = rel.clientOrgName;\n              rate.logisticsCode = rel.logisticsCode;\n              rate.logisticsNo = rel.logisticsNo;\n            }\n          });\n          rep.total = response.total;\n        }\n        cb(rep, err);\n      });\n    }\n  });\n}\n\nfunction ratesList(paramObj, cb) {\n  const apiUrl = `${apiDomain}/resource/rates/logistics_change_log/${paramObj.code}/list`;\n  HTTP.get(apiUrl, paramObj, (response, error) => {\n    cb(response, error);\n  });\n}\nfunction getLogisticRatesColumn(cb) {\n  const columnsData = [\n    {\n      showName: '客户运价',\n      fieldConfigCode: 'clientFreightRate',\n      elementCode: 'clientFreightPrice',\n      extraParams: '{\"field1\":\"clientFreightRate\",\"field2\":\"clientFreightRateUnitCode\",\"checkRule1\":\"[0-9]{1,10}(\\\\\\\\.[0-9]{0,2})?\",\"checkMsg1\":\"不超过13位（最多2位小数）\",\"required\":\"true\",\"detailLinkVisiable\":\"false\",\"maxLength1\":\"13\",\"placeholder1\":\"请输入客户运价\"}'\n    },\n    {\n      showName: '司机参考运价',\n      fieldConfigCode: 'driverReferencePrice',\n      elementCode: 'driverPrice',\n      extraParams: '{\"field1\":\"driverReferencePrice\",\"field2\":\"driverReferencePriceUnitCode\",\"checkRule1\":\"[0-9]{1,10}(\\\\\\\\.[0-9]{0,2})?\",\"checkMsg1\":\"不超过13位（最多2位小数）\",\"required\":\"false\",\"detailLinkVisiable\":\"false\",\"maxLength1\":\"13\",\"placeholder1\":\"请输入司机运价\"}'\n    },\n    {\n      showName: '货物单价',\n      fieldConfigCode: 'goodsUnitPrice',\n      elementCode: 'goodsPrice',\n      extraParams: '{\"field1\":\"goodsPrice\",\"field2\":\"goodsPriceUnitCode\",\"checkRule1\":\"[0-9]{1,10}(\\\\\\\\.[0-9]{0,2})?\",\"checkMsg1\":\"不超过13位（最多2位小数）\",\"required\":\"false\",\"detailLinkVisiable\":\"false\",\"maxLength1\":\"13\",\"placeholder1\":\"请输入货物单价\"}'\n    },\n    {\n      showName: '合理货差系数',\n      fieldConfigCode: 'goodsLossMethod',\n      elementCode: 'goodsLoss',\n      extraParams: '{\"field1\":\"goodsLossMethod\",\"field2\":\"goodsLoss\",\"field3\":\"goodsLossUnitCode\",\"checkRule2\":\"[0-9]{1,10}(\\\\\\\\.[0-9]{0,4})?\",\"checkMsg2\":\"不超过15位（最多4位小数）\",\"required\":\"false\",\"detailLinkVisiable\":\"false\",\"maxLength2\":\"15\",\"placeholder2\":\"请输入合理货差系数\",\"optionsValue1\":[\"goods.loss\",\"goods.loss.ration\"],\"options1\":[\"按量\",\"按系数\"]}'\n    },\n    {\n      showName: '操作人',\n      fieldConfigCode: 'updateUsername',\n      elementCode: 'label',\n      extraParams: '{\"field1\":\"updateUsername\",\"required\":\"false\",\"detailLinkVisiable\":\"false\"}'\n    },\n    {\n      showName: '调整时间',\n      fieldConfigCode: 'updateTime',\n      elementCode: 'label',\n      extraParams: '{\"field1\":\"updateTime\",\"format1\":\"yyyy-MM-dd HH:mm:ss\",\"required\":\"false\",\"detailLinkVisiable\":\"false\"}'\n    }\n  ];\n  cb({content:columnsData});\n}\n/**\n * 获取table头部数据\n * @param callback\n */\nfunction getColumn(cb) {\n  const apiUrl = `${apiDomain}/list_render_info/rates/list`;\n  HTTP.get(apiUrl, {}, (res, error) => {\n    cb(res, error);\n  });\n}\n\n/**\n * 获取search数据\n * @param callback\n */\nfunction getSearch(cb) {\n  const apiUrl = `${apiDomain}/search_render_info/rates/list`;\n  HTTP.get(apiUrl, {}, (res, error) => {\n    cb(res, error);\n  });\n}\n\n/**\n * 删除运价\n * @param paramObj          参数对象\n *        code              编码\n * @param callback          回调\n */\nfunction deleted(paramObj, cb) {\n  const apiUrl = `${apiDomain}/resource/rates/${paramObj.code}/delete`;\n  HTTP.post(apiUrl, {}, (success, error) => {\n    cb(success, error);\n  });\n}\n\n/**\n * 添加运价\n * @param partnerName       简称\n * @param callback          回调\n */\nfunction add(paramObj, cb) {\n  const apiUrl = `${apiDomain}/resource/rates/add`;\n  HTTP.post(apiUrl, paramObj, (res, error) => {\n    cb(res, error);\n  });\n}\n\n/**\n * 编辑运价\n * @param partnerName       简称\n * @param callback          回调\n */\nfunction edit(code, paramObj, cb) {\n  const apiUrl = `${apiDomain}/resource/rates/${code}/edit`;\n  HTTP.post(apiUrl, paramObj, (res, error) => {\n    cb(res, error);\n  });\n}\n\n/**\n * 根据运价编码获取运价详情\n * @param paramObj        参数对象\n *        code\n * @param callback\n */\nfunction get(paramObj, cb) {\n  const apiUrl = `${apiDomain}/resource/rates/${paramObj.code}/info`;\n  HTTP.get(apiUrl, paramObj, (res, error) => {\n    cb(res, error);\n  });\n}\n\n/**\n * export\n * @param callback\n */\nfunction exportCsv(paramObj, callback) {\n  const apiUrl = `${apiDomain}/export/rates`;\n  HTTP.get(apiUrl, paramObj, (success, error) => {\n    callback(success, error);\n  });\n}\n\n/**\n * 下载错误数据的CSV文件\n */\nfunction downloadErrorData(paramObj, callback) {\n  const apiUrl = `${apiDomain}/generator/rates`;\n  HTTP.post(apiUrl, paramObj, (success, error) => {\n    callback(success, error);\n  });\n}\n\n/**\n * 下载CSV模板\n */\nfunction downloadTemplate(paramObj, callback) {\n  const apiUrl = `${apiDomain}/download/template/rates`;\n  HTTP.get(apiUrl, paramObj, (success, error) => {\n    callback(success, error);\n  });\n}\n\nexport { list, ratesList, getColumn, getLogisticRatesColumn, getSearch, deleted, add, edit, get, exportCsv, downloadErrorData, downloadTemplate };\n",null]}